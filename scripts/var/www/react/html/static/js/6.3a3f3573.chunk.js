(window.webpackJsonpbbb=window.webpackJsonpbbb||[]).push([[6],{538:function(e,t,a){"use strict";a.r(t);var n=a(28),r=a(16),l=a(17),o=a(21),c=a(18),s=a(6),m=a(20),i=a(0),d=a.n(i),u=(a(69),a(31)),h=a.n(u),g=a(22),y=a(26),E=a.n(y),p=a(23),v=a.n(p),f=a(1),b=a.n(f),w=(a(63),(new Date).getFullYear(),(new Date).getMonth(),function(e,t){return"".concat(e).padStart(t,"0")}),K=function(e){var t="[object Date]"===Object.prototype.toString.call(e),a=e&&!Number.isNaN(e.valueOf());return t&&a},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return K(e)?[e.getFullYear(),w(+e.getMonth()+1,2),w(+e.getDate(),2)].join("-"):null},D=a(445),I=a.n(D),N=(a(487),a(537)),S=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return d.a.createElement("button",{className:"btn-primary btn-light",onClick:this.props.onClick},this.props.placeholderText)}}]),t}(d.a.Component),O=a(14),j=a.n(O);a.d(t,"default",(function(){return L}));var k="http://"+window.location.hostname+":1337",x=k+"/settings",T=k+"/editsettings",M=k+"/spotcal",F=k+"/controlupdate";S.propTypes={onClick:j.a.func,value:j.a.string,placeholderText:j.a.object},Object(D.registerLocale)("sv",N.a),console.log(N.a);var L=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e)))._isMounted=!1,a.handleAreaChange=function(e){console.log("Area:"+e),a.updateSettings("area",e),a.updates()},a.handlePercentChange=function(e){console.log("Percent:"+e),a.updateSettings("percent",e),a.updates()},a.handleCurrencyChange=function(e){console.log("Currency:",e),a.updateSettings("currency",e),a.updates()},a.updates=function(){fetch(M).then((function(e){return e.json()})).then((function(e){return console.log("spotdata",e),fetch(F)})).then((function(e){console.log("controldata",e)})).catch((function(e){if(console.log(e),"AbortError"!==e.name)throw e}))},a.getDsmText=function(e){if(void 0!==e)return 1===e?"Eln\xe4tsbolag styr":"Eln\xe4tsbolag styr ej"},a.getModeText=function(e){if(void 0!==e)return 1===e?"Du styr enligt elpris":"Du styr ej enligt elpris"},a.getModeVariant=function(e){if(void 0!==e)return 1===e?"success":"danger"},a.handleControlChange=function(e,t){if(console.log(e,t),t.preventDefault(),void 0!==e){var n=1===e?0:1;console.log("Det var "+e+" Ska nu vara: ",n),a.updateSettings("percenton",n),a.updates()}},a.handleDsmChange=function(e,t){if(console.log("Dsm: ",e,t),t.preventDefault(),void 0!==e){var n=1===e?0:1;console.log("Det var "+e+" Ska nu vara: ",n),a.updateSettings("dsmon",n),a.updates()}},a.handleFromChange=function(e){console.log("From:",C(e)),a.updateSettings("awayfrom",C(e));var t=new Date(C(e));a.setState({startDate:t}),a.updates()},a.handleToChange=function(e){console.log("To:",C(e)),a.updateSettings("awayto",C(e));var t=new Date(C(e));a.setState({toDate:t}),a.updates()},a.updateSettings=function(e,t){console.log(e,t),fetch(T,{method:"POST",body:"column="+e+"&value="+t+"&id=1",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(r){if(console.log(r),200!==r.status)throw new Error(r.error);console.log("Uppdaterat"),a.setState(Object(n.a)({},e,t)),console.log(a.state)})).catch((function(e){console.error(e)}))},console.log(e),Object(D.registerLocale)("sv",N.a),Object(D.setDefaultLocale)("sv"),a.state={dsmon:0,currency:"currency",area:"area",percenton:0,percent:0,lat:"Latitud",long:"Longitud",awayto:"",awayfrom:"",startDate:new Date,toDate:new Date,test:C("2019-07-23")},a.handleAreaChange=a.handleAreaChange.bind(Object(s.a)(a)),a.handlePercentChange=a.handlePercentChange.bind(Object(s.a)(a)),a.handleCurrencyChange=a.handleCurrencyChange.bind(Object(s.a)(a)),a.handleDsmChange=a.handleDsmChange.bind(Object(s.a)(a)),a.handleFromChange=a.handleFromChange.bind(Object(s.a)(a)),a.handleToChange=a.handleToChange.bind(Object(s.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,fetch(x).then((function(e){return e.json()})).then((function(t){if(e._isMounted){console.log(t),e.setState({area:t.area}),e.setState({currency:t.currency}),e.setState({lat:t.lat}),e.setState({long:t.long}),e.setState({percent:t.percent}),e.setState({percenton:t.percenton}),e.setState({dsmon:t.dsmon});var a=null!==t.awayfrom?t.awayfrom:e.state.awayfrom,n=null!==t.awayfrom?t.awayto:e.state.awayto;e.setState({awayfrom:a}),e.setState({awayto:n});var r=null!==t.awayfrom?new Date(t.awayfrom):new Date,l=null!==t.awayfrom?new Date(t.awayfrom):new Date;e.setState({startDate:r}),e.setState({toDate:l})}})).catch((function(e){if(console.log(e),"AbortError"!==e.name)throw e}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=d.a.createElement("span",null,d.a.createElement("span",{className:"redtext"},this.state.percent)," %"),t=d.a.createElement("span",null,"Omr\xe5de ",d.a.createElement("span",{className:"redtext"},this.state.area)),a=d.a.createElement("span",null,"Valuta ",d.a.createElement("span",{className:"redtext"},this.state.currency)),n=d.a.createElement("span",null,"Latitud ",d.a.createElement("span",{className:"redtext"},this.state.lat)),r=d.a.createElement("span",null,"Longitud ",d.a.createElement("span",{className:"redtext"},this.state.long)),l=d.a.createElement("span",null,d.a.createElement("span",{className:"twofive"},"Bortrest fr\xe5n: "),d.a.createElement("span",{className:"redtext"},this.state.awayfrom)),o=d.a.createElement("span",null,d.a.createElement("span",{className:"twofive"},"Bortrest till: "),d.a.createElement("span",{className:"redtext"},this.state.awayto));return d.a.createElement("div",{className:"hub-page"},d.a.createElement("h1",null,"Inst\xe4llningar"),d.a.createElement("div",{className:"d-flex flex-column"},d.a.createElement("div",{className:"dropContainer"},d.a.createElement(b.a,{type:"checkbox",className:"settings-toggle",onClick:this.handleControlChange.bind(this,this.state.percenton),variant:this.getModeVariant(this.state.percenton)},this.getModeText(this.state.percenton))),d.a.createElement("div",{className:"dropContainer"},d.a.createElement(b.a,{type:"checkbox",className:"settings-toggle",onClick:this.handleDsmChange.bind(this,this.state.dsmon),variant:this.getModeVariant(this.state.dsmon)},this.getDsmText(this.state.dsmon)))),d.a.createElement(E.a,{id:"dropdown-area",onSelect:this.handleAreaChange,title:t},d.a.createElement(v.a.Item,{eventKey:"SE1"},"SE1"),d.a.createElement(v.a.Item,{eventKey:"SE2"},"SE2"),d.a.createElement(v.a.Item,{eventKey:"SE3"},"SE3"),d.a.createElement(v.a.Item,{eventKey:"SE4"},"SE4"),d.a.createElement(v.a.Item,{eventKey:"SP1"},"SP1"),d.a.createElement(v.a.Item,{eventKey:"DK1"},"DK1"),d.a.createElement(v.a.Item,{eventKey:"EE"},"EE"),d.a.createElement(v.a.Item,{eventKey:"FI"},"FI"),d.a.createElement(v.a.Item,{eventKey:"LT"},"LT"),d.a.createElement(v.a.Item,{eventKey:"LV"},"LV"),d.a.createElement(v.a.Item,{eventKey:"NO1"},"NO1"),d.a.createElement(v.a.Item,{eventKey:"NO2"},"NO2"),d.a.createElement(v.a.Item,{eventKey:"NO3"},"NO3"),d.a.createElement(v.a.Item,{eventKey:"NO4"},"NO4"),d.a.createElement(v.a.Item,{eventKey:"NO5"},"NO5")),d.a.createElement(E.a,{id:"dropdown-currency",onSelect:this.handleCurrencyChange,title:a},d.a.createElement(v.a.Item,{eventKey:"SEK"},"SEK"),d.a.createElement(v.a.Item,{eventKey:"DKK"},"DKK"),d.a.createElement(v.a.Item,{eventKey:"NOK"},"NOK"),d.a.createElement(v.a.Item,{eventKey:"EUR"},"EUR")),d.a.createElement(E.a,{id:"dropdown-percent",onSelect:this.handlePercentChange,title:e},d.a.createElement(v.a.Item,{eventKey:"0"},"0"),d.a.createElement(v.a.Item,{eventKey:"1"},"1"),d.a.createElement(v.a.Item,{eventKey:"2"},"2"),d.a.createElement(v.a.Item,{eventKey:"3"},"3"),d.a.createElement(v.a.Item,{eventKey:"4"},"4"),d.a.createElement(v.a.Item,{eventKey:"5"},"5"),d.a.createElement(v.a.Item,{eventKey:"6"},"6"),d.a.createElement(v.a.Item,{eventKey:"7"},"7"),d.a.createElement(v.a.Item,{eventKey:"8"},"8"),d.a.createElement(v.a.Item,{eventKey:"9"},"9"),d.a.createElement(v.a.Item,{eventKey:"10"},"10"),d.a.createElement(v.a.Item,{eventKey:"11"},"11"),d.a.createElement(v.a.Item,{eventKey:"12"},"12"),d.a.createElement(v.a.Item,{eventKey:"13"},"13"),d.a.createElement(v.a.Item,{eventKey:"14"},"14"),d.a.createElement(v.a.Item,{eventKey:"15"},"15"),d.a.createElement(v.a.Item,{eventKey:"16"},"16"),d.a.createElement(v.a.Item,{eventKey:"17"},"17"),d.a.createElement(v.a.Item,{eventKey:"18"},"18"),d.a.createElement(v.a.Item,{eventKey:"19"},"19"),d.a.createElement(v.a.Item,{eventKey:"20"},"20")),d.a.createElement(h.a,{variant:"light",size:"lg",block:!0},d.a.createElement(g.b,{to:"/settings",className:"buttonstyle"},n)),d.a.createElement(h.a,{variant:"light",size:"lg",block:!0},d.a.createElement(g.b,{to:"/settings",className:"buttonstyle"},r)),d.a.createElement("div",{className:"btn-light btn-block"},d.a.createElement(I.a,{customInput:d.a.createElement(S,{placeholderText:l}),selected:this.state.startDate,dateFormat:"yyyy-MM-dd",locale:"sv",className:".btn-primary datefrom",calendarClassName:"datefrom",showWeekNumbers:!0,minDate:new Date,onChange:this.handleFromChange})),d.a.createElement("div",{className:"btn-light btn-block"},d.a.createElement(I.a,{customInput:d.a.createElement(S,{placeholderText:o}),selected:this.state.toDate,dateFormat:"yyyy-MM-dd",locale:"sv",className:".btn-primary dateto",calendarClassName:"dateto",minDate:new Date(this.state.awayfrom),showWeekNumbers:!0,onChange:this.handleToChange})),d.a.createElement(h.a,{variant:"light",size:"lg",block:!0},d.a.createElement(g.b,{to:"/zones",className:"buttonstyle"},"Dina zoner")))}}]),t}(i.Component)}}]);
//# sourceMappingURL=6.3a3f3573.chunk.js.map