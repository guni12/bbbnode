(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{477:function(e,t,a){"use strict";a.r(t);var n=a(22),r=a(23),o=a(25),l=a(24),s=a(26),c=a(0);c.Component},478:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return y});var n=a(22),r=a(23),o=a(25),l=a(24),s=a(26),c=a(0),i=a.n(c),m=(a(71),a(20)),u=a.n(m),h=a(21),d=a(428),p=a.n(d),g=a(276),f="http://192.168.86.36:1337/",E=f+"settings",y=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(o.a)(this,Object(l.a)(t).call(this)))._isMounted=!1,e.makeChartJson=function(e,t,a){return{id:t,color:a,data:e.filter(function(e){return null!==e}).map(function(e,t){return{x:t<9?"0".concat(t+1):"".concat(t+1),y:e}})}},e.myformatter=function(e){var t=(parseFloat(e)/10).toFixed(1);return t=(t=t.toString()).replace(".",","),""===e&&(t=null),t},e.extractPrices=function(t){for(var a=[],n=["N\xe4r"],r=1;r<25;r++){var o="Hour"+r,l=r<10?"0"+r:r+"",s=0;3===r&&((s=""===t[o="Hour"+r+"A"]?null:(parseFloat(t[o])/10).toFixed(1))&&(a.push(s),n.push(l)),o="Hour"+r+"B",l="VT"),(s=""===t[o]?null:(parseFloat(t[o])/10).toFixed(1))&&(a.push(s),n.push(l))}return e.setState({hours:n}),a},e.handlePrices=function(e){for(var t=[],a=0;a<e.length;a++){var n=null===e[a]?e[a]:e[a].toString();n=null===n?n:n.replace(".",","),t.push(n)}return t},e.MyResponsiveLine=function(t){var a=i.a.createElement(g.a,{data:t,margin:{top:50,right:20,bottom:50,left:45},xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto"},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"spotpriser",legendOffset:35,legendPosition:"start"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:e.state.currency,legendOffset:-35,legendPosition:"end"},colors:{scheme:"set1"},pointSize:5,pointColor:{from:"color",modifiers:[]},pointBorderWidth:2,pointBorderColor:{from:"color"},pointLabel:"y",pointLabelYOffset:60,enableSlices:"x",legends:[{anchor:"top-left",direction:"row",justify:!1,translateX:10,translateY:-40,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:10,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .9)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .08)",itemOpacity:1}}]}]});e.setState({chart:a})},e.state={pricenow:"0",currency:"\xf6re/kwh",hour:"0",name:"",average:"0",tempis:"0",measured:"0",should:"0",percent:"0",today:"",tomorrow:"",hours:[],prices:[],controls:[],tomspot:[],chart:null,chartdata:null},e}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=new Date,a=t.getHours(),n=t.getDate(),r=t.getDate()+1,o=t.getMonth()+1,l=n+"/"+o,s=r+"/"+o;fetch("http://192.168.86.36:1337/zones/1").then(function(e){return e.json()}).then(function(t){if(e._isMounted){var a=t.tempis.toFixed(1);return e.setState({should:t.should}),e.setState({measured:t.measured}),e.setState({tempis:a}),e.setState({name:t.name}),fetch("http://192.168.86.36:1337/spotcal")}}).then(function(e){return e.json()}).then(function(t){if(e._isMounted){var n="Hour"+a,r="EUR"===t.Currency?"c/kwh":"\xf6re/kwh",o=e.myformatter(t.Average),c=e.myformatter(t[n]),i=e.extractPrices(t),m=e.handlePrices(i),u=e.makeChartJson(i,"idag","hsl(12,100%,46%)");return e.setState({average:o}),e.setState({pricenow:c}),e.setState({hour:a}),e.setState({currency:r}),e.setState({today:l}),e.setState({tomorrow:s}),e.setState({prices:m}),e.setState({chartdata:u}),e.MyResponsiveLine([e.state.chartdata]),fetch("http://192.168.86.36:1337/spotcal/control")}}).then(function(e){return console.log("results2",e),e.json()}).then(function(t){return console.log("data2",t),e.setState({controls:t}),a>=16?fetch("http://192.168.86.36:1337/spotcal/2").then(function(e){return e.json()}).then(function(t){var a=e.extractPrices(t),n=e.handlePrices(a),r=e.state.chartdata,o=e.makeChartJson(a,"imorgon","orange"),l=[];return r&&l.push(r),o&&l.push(o),e.setState({tomspot:n}),e.MyResponsiveLine(l),fetch(E)}):fetch(E)}).then(function(e){return console.log(e),e.json()}).then(function(t){e.setState({percent:t.percent})}).catch(function(e){if(console.log(e),"AbortError"!==e.name)throw e})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state.prices,t=this.state.controls,a=this.state.hours,n=this.state.percent,r=null,o=null;return this.state.hour>16&&(r=i.a.createElement("td",null,this.state.tomorrow),o=this.state.tomspot.map(function(e,t){return i.a.createElement("td",{key:t},e)})),i.a.createElement("div",{className:"hub-page"},i.a.createElement("p",null,i.a.createElement("span",{className:"red-small larger-font"},this.state.pricenow," "),this.state.currency," kl.",this.state.hour,i.a.createElement("br",null),"Medelpris idag: ",i.a.createElement("span",{className:"red-small larger-font"},this.state.average)," ",this.state.currency,i.a.createElement("br",null),this.state.header),i.a.createElement(p.a,{striped:!0,bordered:!0,hover:!0,size:"sm",responsive:!0,className:"mytable"},i.a.createElement("thead",null,i.a.createElement("tr",null,a.map(function(e,t){return i.a.createElement("th",{key:t},e)}))),i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,this.state.today),e.map(function(e,t){return i.a.createElement("td",{key:t},e)})),i.a.createElement("tr",{className:"control"},i.a.createElement("td",null,n+"%"),t.map(function(e,t){return i.a.createElement("td",{key:t,className:"class"+e})})),i.a.createElement("tr",null,r,o))),i.a.createElement("p",null,"Temperatur ",this.state.name,": ",i.a.createElement("span",{className:"red-small larger-font"},this.state.tempis)," \xb0C",i.a.createElement("br",null),"Du \xf6nskar: ",i.a.createElement("span",{className:"red-small larger-font"},this.state.should)," \xb0C",i.a.createElement("br",null),"Uppm\xe4tt: ",this.state.measured),i.a.createElement("div",{className:"chart"},this.state.chart),i.a.createElement(h.b,{to:"/settings",className:"btn btn-block"},i.a.createElement(u.a,{variant:"light",size:"lg",block:!0},"Alla inst\xe4llningar")),i.a.createElement(h.b,{to:"/zones",className:"btn btn-block"},i.a.createElement(u.a,{variant:"light",size:"lg",block:!0},"Zonerna")))}}]),t}(c.Component)},479:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return d});var n=a(22),r=a(23),o=a(25),l=a(24),s=a(26),c=a(0),i=a.n(c),m=(a(71),a(20)),u=a.n(m),h=a(21),d=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(o.a)(this,Object(l.a)(t).call(this))).state={name:"",sensor:"",should:"",zone:"",dsm:"",away:"",max:"",min:"",is:"",measured:"",items:[]},e}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://192.168.86.36:1337/zones").then(function(e){return console.log("response",e),e.json()}).then(function(t){console.log(t,t[0].measured),e.setState({items:t}),e.setState({measured:t[0].measured})})}},{key:"render",value:function(){var e=this.state.items;return i.a.createElement("div",{className:"zones-page"},i.a.createElement("h1",null,"M\xe4tpunkter"),i.a.createElement("p",null,"Senaste m\xe4tning: ",this.state.measured),i.a.createElement("div",null,e.map(function(e){var t=e.tempis.toFixed(1),a=t.toString();return t=a.replace(".",","),i.a.createElement("span",{key:e.zone},i.a.createElement(h.b,{to:"/zone/".concat(e.id),className:"btn btn-block"},i.a.createElement(u.a,{variant:"light",size:"lg",block:!0},i.a.createElement("span",{className:"tempis"},t," \xb0C"),i.a.createElement("span",null,e.name)," ",i.a.createElement("span",{className:"should"},e.should," \xb0C"))))})))}}]),t}(c.Component)},481:function(e,t,a){"use strict";a.r(t);var n=a(29),r=a(22),o=a(23),l=a(25),s=a(24),c=a(10),i=a(26),m=a(0),u=a.n(m),h=(a(71),a(20)),d=a.n(h),p=a(21),g=a(27),f=a.n(g),E=a(18),y=a.n(E),v=a(1),b=a.n(v),S=(a(53),(new Date).getFullYear(),(new Date).getMonth(),function(e,t){return"".concat(e).padStart(t,"0")}),w=function(e){var t="[object Date]"===Object.prototype.toString.call(e),a=e&&!Number.isNaN(e.valueOf());return t&&a},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return w(e)?[e.getFullYear(),S(+e.getMonth()+1,2),S(+e.getDate(),2)].join("-"):null},N=a(429),k=(a(468),a(480)),D=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return u.a.createElement("button",{className:"btn-primary btn-light",onClick:this.props.onClick},this.props.placeholderText)}}]),t}(u.a.Component),O=a(15),K=a.n(O);a.d(t,"default",function(){return M});var j="http://192.168.86.36:1337/",I=j+"editsettings",x=j+"hourcontrol";D.propTypes={onClick:K.a.func,value:K.a.string,placeholderText:K.a.object},Object(N.b)("sv",k.a),console.log(k.a);var M=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(s.a)(t).call(this,e)))._isMounted=!1,a.handleAreaChange=function(e){console.log("Area:"+e),a.updateSettings("area",e)},a.handlePercentChange=function(e){console.log("Percent:"+e),a.updateSettings("percent",e)},a.handleCurrencyChange=function(e){console.log("Currency:",e),a.updateSettings("currency",e)},a.getDsmText=function(e){if(void 0!==e)return 1===e?"Eln\xe4tsbolag styr":"Eln\xe4tsbolag styr ej"},a.getModeText=function(e){if(void 0!==e)return 1===e?"Du styr enligt elpris":"Du styr ej enligt elpris"},a.getModeVariant=function(e){if(console.log(e,typeof e),void 0!==e)return 1===e?"success":"danger"},a.handleControlChange=function(e,t){if(console.log(e,t),t.preventDefault(),void 0!==e){var n=1===e?0:1;console.log("Det var "+e+" Ska nu vara: ",n),a.updateSettings("percenton",n),fetch(x).then(function(e){return e.json()}).then(function(e){console.log(e),a.setState({percenton:n})}).catch(function(e){if(console.log(e),"AbortError"!==e.name)throw e})}},a.handleDsmChange=function(e,t){if(console.log("Dsm: ",e,t),t.preventDefault(),void 0!==e){var n=1===e?0:1;console.log("Det var "+e+" Ska nu vara: ",n),a.updateSettings("dsmon",n),fetch(x).then(function(e){return e.json()}).then(function(e){console.log(e),a.setState({dsmon:n})}).catch(function(e){if(console.log(e),"AbortError"!==e.name)throw e})}},a.handleFromChange=function(e){console.log("From:",C(e)),a.updateSettings("awayfrom",C(e));var t=new Date(C(e));a.setState({startDate:t})},a.handleToChange=function(e){console.log("To:",C(e)),a.updateSettings("awayto",C(e));var t=new Date(C(e));a.setState({toDate:t})},a.updateSettings=function(e,t){console.log(e,t),fetch(I,{method:"POST",body:"column="+e+"&value="+t+"&id=1",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(r){if(console.log(r),201!==r.status)throw new Error(r.error);console.log("Uppdaterat"),a.setState(Object(n.a)({},e,t)),console.log(a.state)}).catch(function(e){console.error(e)})},Object(N.b)("sv",k.a),Object(N.c)("sv"),a.state={dsmon:0,currency:"currency",area:"area",percenton:0,percent:0,lat:"Latitud",long:"Longitud",awayto:"",awayfrom:"",startDate:new Date,toDate:new Date,test:C("2019-07-23")},a.handleAreaChange=a.handleAreaChange.bind(Object(c.a)(a)),a.handlePercentChange=a.handlePercentChange.bind(Object(c.a)(a)),a.handleCurrencyChange=a.handleCurrencyChange.bind(Object(c.a)(a)),a.handleDsmChange=a.handleDsmChange.bind(Object(c.a)(a)),a.handleFromChange=a.handleFromChange.bind(Object(c.a)(a)),a.handleToChange=a.handleToChange.bind(Object(c.a)(a)),a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,fetch("http://192.168.86.36:1337/settings").then(function(e){return e.json()}).then(function(t){if(e._isMounted){console.log(t),e.setState({area:t.area}),e.setState({currency:t.currency}),e.setState({lat:t.lat}),e.setState({long:t.long}),e.setState({percent:t.percent}),e.setState({percenton:t.percenton}),e.setState({dsmon:t.dsmon});var a=null!==t.awayfrom?t.awayfrom:e.state.awayfrom,n=null!==t.awayfrom?t.awayto:e.state.awayto;e.setState({awayfrom:a}),e.setState({awayto:n});var r=null!==t.awayfrom?new Date(t.awayfrom):new Date,o=null!==t.awayfrom?new Date(t.awayfrom):new Date;e.setState({startDate:r}),e.setState({toDate:o})}}).catch(function(e){if(console.log(e),"AbortError"!==e.name)throw e})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=u.a.createElement("span",null,u.a.createElement("span",{className:"redtext"},this.state.percent)," %"),t=u.a.createElement("span",null,"Omr\xe5de ",u.a.createElement("span",{className:"redtext"},this.state.area)),a=u.a.createElement("span",null,"Valuta ",u.a.createElement("span",{className:"redtext"},this.state.currency)),n=u.a.createElement("span",null,"Latitud ",u.a.createElement("span",{className:"redtext"},this.state.lat)),r=u.a.createElement("span",null,"Longitud ",u.a.createElement("span",{className:"redtext"},this.state.long)),o=u.a.createElement("span",null,u.a.createElement("span",{className:"twofive"},"Bortrest fr\xe5n: "),u.a.createElement("span",{className:"redtext"},this.state.awayfrom)),l=u.a.createElement("span",null,u.a.createElement("span",{className:"twofive"},"Bortrest till: "),u.a.createElement("span",{className:"redtext"},this.state.awayto));return u.a.createElement("div",{className:"hub-page"},u.a.createElement("h1",null,"Inst\xe4llningar"),u.a.createElement("div",{className:"d-flex flex-column"},u.a.createElement("div",{className:"dropContainer"},u.a.createElement(b.a,{type:"checkbox",className:"settings-toggle",onClick:this.handleControlChange.bind(this,this.state.percenton),variant:this.getModeVariant(this.state.percenton)},this.getModeText(this.state.percenton))),u.a.createElement("div",{className:"dropContainer"},u.a.createElement(b.a,{type:"checkbox",className:"settings-toggle",onClick:this.handleDsmChange.bind(this,this.state.dsmon),variant:this.getModeVariant(this.state.dsmon)},this.getDsmText(this.state.dsmon)))),u.a.createElement(f.a,{id:"dropdown-area",onSelect:this.handleAreaChange,title:t},u.a.createElement(y.a.Item,{eventKey:"SE1"},"SE1"),u.a.createElement(y.a.Item,{eventKey:"SE2"},"SE2"),u.a.createElement(y.a.Item,{eventKey:"SE3"},"SE3"),u.a.createElement(y.a.Item,{eventKey:"SE4"},"SE4"),u.a.createElement(y.a.Item,{eventKey:"SP1"},"SP1"),u.a.createElement(y.a.Item,{eventKey:"DK1"},"DK1"),u.a.createElement(y.a.Item,{eventKey:"EE"},"EE"),u.a.createElement(y.a.Item,{eventKey:"FI"},"FI"),u.a.createElement(y.a.Item,{eventKey:"LT"},"LT"),u.a.createElement(y.a.Item,{eventKey:"LV"},"LV"),u.a.createElement(y.a.Item,{eventKey:"NO1"},"NO1"),u.a.createElement(y.a.Item,{eventKey:"NO2"},"NO2"),u.a.createElement(y.a.Item,{eventKey:"NO3"},"NO3"),u.a.createElement(y.a.Item,{eventKey:"NO4"},"NO4"),u.a.createElement(y.a.Item,{eventKey:"NO5"},"NO5")),u.a.createElement(f.a,{id:"dropdown-currency",onSelect:this.handleCurrencyChange,title:a},u.a.createElement(y.a.Item,{eventKey:"SEK"},"SEK"),u.a.createElement(y.a.Item,{eventKey:"DKK"},"DKK"),u.a.createElement(y.a.Item,{eventKey:"NOK"},"NOK"),u.a.createElement(y.a.Item,{eventKey:"EUR"},"EUR")),u.a.createElement(f.a,{id:"dropdown-percent",onSelect:this.handlePercentChange,title:e},u.a.createElement(y.a.Item,{eventKey:"0"},"0"),u.a.createElement(y.a.Item,{eventKey:"1"},"1"),u.a.createElement(y.a.Item,{eventKey:"2"},"2"),u.a.createElement(y.a.Item,{eventKey:"3"},"3"),u.a.createElement(y.a.Item,{eventKey:"4"},"4"),u.a.createElement(y.a.Item,{eventKey:"5"},"5"),u.a.createElement(y.a.Item,{eventKey:"6"},"6"),u.a.createElement(y.a.Item,{eventKey:"7"},"7"),u.a.createElement(y.a.Item,{eventKey:"8"},"8"),u.a.createElement(y.a.Item,{eventKey:"9"},"9"),u.a.createElement(y.a.Item,{eventKey:"10"},"10"),u.a.createElement(y.a.Item,{eventKey:"11"},"11"),u.a.createElement(y.a.Item,{eventKey:"12"},"12"),u.a.createElement(y.a.Item,{eventKey:"13"},"13"),u.a.createElement(y.a.Item,{eventKey:"14"},"14"),u.a.createElement(y.a.Item,{eventKey:"15"},"15"),u.a.createElement(y.a.Item,{eventKey:"16"},"16"),u.a.createElement(y.a.Item,{eventKey:"17"},"17"),u.a.createElement(y.a.Item,{eventKey:"18"},"18"),u.a.createElement(y.a.Item,{eventKey:"19"},"19"),u.a.createElement(y.a.Item,{eventKey:"20"},"20")),u.a.createElement(d.a,{variant:"light",size:"lg",block:!0},u.a.createElement(p.b,{to:"/settings",className:"buttonstyle"},n)),u.a.createElement(d.a,{variant:"light",size:"lg",block:!0},u.a.createElement(p.b,{to:"/settings",className:"buttonstyle"},r)),u.a.createElement("div",{className:"btn-light btn-block"},u.a.createElement(N.a,{customInput:u.a.createElement(D,{placeholderText:o}),selected:this.state.startDate,dateFormat:"yyyy-MM-dd",locale:"sv",className:".btn-primary datefrom",calendarClassName:"datefrom",showWeekNumbers:!0,minDate:new Date,onChange:this.handleFromChange})),u.a.createElement("div",{className:"btn-light btn-block"},u.a.createElement(N.a,{customInput:u.a.createElement(D,{placeholderText:l}),selected:this.state.toDate,dateFormat:"yyyy-MM-dd",locale:"sv",className:".btn-primary dateto",calendarClassName:"dateto",minDate:new Date(this.state.awayfrom),showWeekNumbers:!0,onChange:this.handleToChange})),u.a.createElement(d.a,{variant:"light",size:"lg",block:!0},u.a.createElement(p.b,{to:"/zones",className:"buttonstyle"},"Dina zoner")))}}]),t}(m.Component)}}]);
//# sourceMappingURL=villains.96700305.chunk.js.map