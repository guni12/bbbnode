(window.webpackJsonpbbb=window.webpackJsonpbbb||[]).push([[6],{477:function(e,t,a){"use strict";a.r(t);var n=a(28),r=a(17),l=a(18),o=a(21),c=a(19),s=a(6),m=a(20),i=a(0),h=a.n(i),d=(a(69),a(29)),u=a.n(d),g=a(22),E=a(26),y=a.n(E),v=a(23),p=a.n(v),f=a(1),b=a.n(f),w=(a(53),(new Date).getFullYear(),(new Date).getMonth(),function(e,t){return"".concat(e).padStart(t,"0")}),K=function(e){var t="[object Date]"===Object.prototype.toString.call(e),a=e&&!Number.isNaN(e.valueOf());return t&&a},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return K(e)?[e.getFullYear(),w(+e.getMonth()+1,2),w(+e.getDate(),2)].join("-"):null},I=a(427),D=(a(466),a(476)),S=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return h.a.createElement("button",{className:"btn-primary btn-light",onClick:this.props.onClick},this.props.placeholderText)}}]),t}(h.a.Component),N=a(14),O=a.n(N);a.d(t,"default",function(){return M});var j="http://"+window.location.hostname+":1337",k=j+"/settings",x=j+"/editsettings",T=j+"/controlupdate";S.propTypes={onClick:O.a.func,value:O.a.string,placeholderText:O.a.object},Object(I.b)("sv",D.a),console.log(D.a);var M=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e)))._isMounted=!1,a.handleAreaChange=function(e){console.log("Area:"+e),a.updateSettings("area",e)},a.handlePercentChange=function(e){console.log("Percent:"+e),a.updateSettings("percent",e)},a.handleCurrencyChange=function(e){console.log("Currency:",e),a.updateSettings("currency",e)},a.getDsmText=function(e){if(void 0!==e)return 1===e?"Eln\xe4tsbolag styr":"Eln\xe4tsbolag styr ej"},a.getModeText=function(e){if(void 0!==e)return 1===e?"Du styr enligt elpris":"Du styr ej enligt elpris"},a.getModeVariant=function(e){if(void 0!==e)return 1===e?"success":"danger"},a.handleControlChange=function(e,t){if(console.log(e,t),t.preventDefault(),void 0!==e){var n=1===e?0:1;console.log("Det var "+e+" Ska nu vara: ",n),a.updateSettings("percenton",n),fetch(T).then(function(e){return e.json()}).then(function(e){console.log(e),a.setState({percenton:n})}).catch(function(e){if(console.log(e),"AbortError"!==e.name)throw e})}},a.handleDsmChange=function(e,t){if(console.log("Dsm: ",e,t),t.preventDefault(),void 0!==e){var n=1===e?0:1;console.log("Det var "+e+" Ska nu vara: ",n),a.updateSettings("dsmon",n),fetch(T).then(function(e){return e.json()}).then(function(e){console.log(e),a.setState({dsmon:n})}).catch(function(e){if(console.log(e),"AbortError"!==e.name)throw e})}},a.handleFromChange=function(e){console.log("From:",C(e)),a.updateSettings("awayfrom",C(e));var t=new Date(C(e));a.setState({startDate:t})},a.handleToChange=function(e){console.log("To:",C(e)),a.updateSettings("awayto",C(e));var t=new Date(C(e));a.setState({toDate:t})},a.updateSettings=function(e,t){console.log(e,t),fetch(x,{method:"POST",body:"column="+e+"&value="+t+"&id=1",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(r){if(console.log(r),200!==r.status)throw new Error(r.error);console.log("Uppdaterat"),a.setState(Object(n.a)({},e,t)),console.log(a.state)}).catch(function(e){console.error(e)})},console.log(e),Object(I.b)("sv",D.a),Object(I.c)("sv"),a.state={dsmon:0,currency:"currency",area:"area",percenton:0,percent:0,lat:"Latitud",long:"Longitud",awayto:"",awayfrom:"",startDate:new Date,toDate:new Date,test:C("2019-07-23")},a.handleAreaChange=a.handleAreaChange.bind(Object(s.a)(a)),a.handlePercentChange=a.handlePercentChange.bind(Object(s.a)(a)),a.handleCurrencyChange=a.handleCurrencyChange.bind(Object(s.a)(a)),a.handleDsmChange=a.handleDsmChange.bind(Object(s.a)(a)),a.handleFromChange=a.handleFromChange.bind(Object(s.a)(a)),a.handleToChange=a.handleToChange.bind(Object(s.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,fetch(k).then(function(e){return e.json()}).then(function(t){if(e._isMounted){console.log(t),e.setState({area:t.area}),e.setState({currency:t.currency}),e.setState({lat:t.lat}),e.setState({long:t.long}),e.setState({percent:t.percent}),e.setState({percenton:t.percenton}),e.setState({dsmon:t.dsmon});var a=null!==t.awayfrom?t.awayfrom:e.state.awayfrom,n=null!==t.awayfrom?t.awayto:e.state.awayto;e.setState({awayfrom:a}),e.setState({awayto:n});var r=null!==t.awayfrom?new Date(t.awayfrom):new Date,l=null!==t.awayfrom?new Date(t.awayfrom):new Date;e.setState({startDate:r}),e.setState({toDate:l})}}).catch(function(e){if(console.log(e),"AbortError"!==e.name)throw e})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=h.a.createElement("span",null,h.a.createElement("span",{className:"redtext"},this.state.percent)," %"),t=h.a.createElement("span",null,"Omr\xe5de ",h.a.createElement("span",{className:"redtext"},this.state.area)),a=h.a.createElement("span",null,"Valuta ",h.a.createElement("span",{className:"redtext"},this.state.currency)),n=h.a.createElement("span",null,"Latitud ",h.a.createElement("span",{className:"redtext"},this.state.lat)),r=h.a.createElement("span",null,"Longitud ",h.a.createElement("span",{className:"redtext"},this.state.long)),l=h.a.createElement("span",null,h.a.createElement("span",{className:"twofive"},"Bortrest fr\xe5n: "),h.a.createElement("span",{className:"redtext"},this.state.awayfrom)),o=h.a.createElement("span",null,h.a.createElement("span",{className:"twofive"},"Bortrest till: "),h.a.createElement("span",{className:"redtext"},this.state.awayto));return h.a.createElement("div",{className:"hub-page"},h.a.createElement("h1",null,"Inst\xe4llningar"),h.a.createElement("div",{className:"d-flex flex-column"},h.a.createElement("div",{className:"dropContainer"},h.a.createElement(b.a,{type:"checkbox",className:"settings-toggle",onClick:this.handleControlChange.bind(this,this.state.percenton),variant:this.getModeVariant(this.state.percenton)},this.getModeText(this.state.percenton))),h.a.createElement("div",{className:"dropContainer"},h.a.createElement(b.a,{type:"checkbox",className:"settings-toggle",onClick:this.handleDsmChange.bind(this,this.state.dsmon),variant:this.getModeVariant(this.state.dsmon)},this.getDsmText(this.state.dsmon)))),h.a.createElement(y.a,{id:"dropdown-area",onSelect:this.handleAreaChange,title:t},h.a.createElement(p.a.Item,{eventKey:"SE1"},"SE1"),h.a.createElement(p.a.Item,{eventKey:"SE2"},"SE2"),h.a.createElement(p.a.Item,{eventKey:"SE3"},"SE3"),h.a.createElement(p.a.Item,{eventKey:"SE4"},"SE4"),h.a.createElement(p.a.Item,{eventKey:"SP1"},"SP1"),h.a.createElement(p.a.Item,{eventKey:"DK1"},"DK1"),h.a.createElement(p.a.Item,{eventKey:"EE"},"EE"),h.a.createElement(p.a.Item,{eventKey:"FI"},"FI"),h.a.createElement(p.a.Item,{eventKey:"LT"},"LT"),h.a.createElement(p.a.Item,{eventKey:"LV"},"LV"),h.a.createElement(p.a.Item,{eventKey:"NO1"},"NO1"),h.a.createElement(p.a.Item,{eventKey:"NO2"},"NO2"),h.a.createElement(p.a.Item,{eventKey:"NO3"},"NO3"),h.a.createElement(p.a.Item,{eventKey:"NO4"},"NO4"),h.a.createElement(p.a.Item,{eventKey:"NO5"},"NO5")),h.a.createElement(y.a,{id:"dropdown-currency",onSelect:this.handleCurrencyChange,title:a},h.a.createElement(p.a.Item,{eventKey:"SEK"},"SEK"),h.a.createElement(p.a.Item,{eventKey:"DKK"},"DKK"),h.a.createElement(p.a.Item,{eventKey:"NOK"},"NOK"),h.a.createElement(p.a.Item,{eventKey:"EUR"},"EUR")),h.a.createElement(y.a,{id:"dropdown-percent",onSelect:this.handlePercentChange,title:e},h.a.createElement(p.a.Item,{eventKey:"0"},"0"),h.a.createElement(p.a.Item,{eventKey:"1"},"1"),h.a.createElement(p.a.Item,{eventKey:"2"},"2"),h.a.createElement(p.a.Item,{eventKey:"3"},"3"),h.a.createElement(p.a.Item,{eventKey:"4"},"4"),h.a.createElement(p.a.Item,{eventKey:"5"},"5"),h.a.createElement(p.a.Item,{eventKey:"6"},"6"),h.a.createElement(p.a.Item,{eventKey:"7"},"7"),h.a.createElement(p.a.Item,{eventKey:"8"},"8"),h.a.createElement(p.a.Item,{eventKey:"9"},"9"),h.a.createElement(p.a.Item,{eventKey:"10"},"10"),h.a.createElement(p.a.Item,{eventKey:"11"},"11"),h.a.createElement(p.a.Item,{eventKey:"12"},"12"),h.a.createElement(p.a.Item,{eventKey:"13"},"13"),h.a.createElement(p.a.Item,{eventKey:"14"},"14"),h.a.createElement(p.a.Item,{eventKey:"15"},"15"),h.a.createElement(p.a.Item,{eventKey:"16"},"16"),h.a.createElement(p.a.Item,{eventKey:"17"},"17"),h.a.createElement(p.a.Item,{eventKey:"18"},"18"),h.a.createElement(p.a.Item,{eventKey:"19"},"19"),h.a.createElement(p.a.Item,{eventKey:"20"},"20")),h.a.createElement(u.a,{variant:"light",size:"lg",block:!0},h.a.createElement(g.b,{to:"/settings",className:"buttonstyle"},n)),h.a.createElement(u.a,{variant:"light",size:"lg",block:!0},h.a.createElement(g.b,{to:"/settings",className:"buttonstyle"},r)),h.a.createElement("div",{className:"btn-light btn-block"},h.a.createElement(I.a,{customInput:h.a.createElement(S,{placeholderText:l}),selected:this.state.startDate,dateFormat:"yyyy-MM-dd",locale:"sv",className:".btn-primary datefrom",calendarClassName:"datefrom",showWeekNumbers:!0,minDate:new Date,onChange:this.handleFromChange})),h.a.createElement("div",{className:"btn-light btn-block"},h.a.createElement(I.a,{customInput:h.a.createElement(S,{placeholderText:o}),selected:this.state.toDate,dateFormat:"yyyy-MM-dd",locale:"sv",className:".btn-primary dateto",calendarClassName:"dateto",minDate:new Date(this.state.awayfrom),showWeekNumbers:!0,onChange:this.handleToChange})),h.a.createElement(u.a,{variant:"light",size:"lg",block:!0},h.a.createElement(g.b,{to:"/zones",className:"buttonstyle"},"Dina zoner")))}}]),t}(i.Component)}}]);
//# sourceMappingURL=6.6b00c85a.chunk.js.map